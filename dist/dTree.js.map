{"version":3,"sources":["dTree.js"],"names":[],"mappings":"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","file":"dTree.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  global.dTree = factory();\n}(this, function () { 'use strict';\n\n  class TreeBuilder {\n\n    constructor(root, siblings, opts) {\n      this.root = root;\n      this.siblings = siblings;\n      this.opts = opts;\n\n      // flatten nodes\n      this.allNodes = this._flatten(this.root);\n      this.nodeSize = this._calculateNodeSize();\n\n      TreeBuilder.DEBUG_LEVEL = opts.debug ? 1 : 0;\n    }\n\n    create() {\n\n      var opts = this.opts;\n      var allNodes = this.allNodes;\n      var nodeSize = this.nodeSize;\n\n      var width = opts.width + opts.margin.left + opts.margin.right;\n      var height = opts.height + opts.margin.top + opts.margin.bottom;\n\n      var zoom = d3.behavior.zoom()\n        .scaleExtent([0.1, 10])\n        .on('zoom', _.bind(function() {\n          svg.attr('transform', 'translate(' + d3.event.translate + ')' +\n            ' scale(' + d3.event.scale + ')');\n        }, this));\n\n      //make an SVG\n      var svg = this.svg = d3.select(opts.target)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height)\n        .call(zoom)\n        .append('g')\n        .attr('transform', 'translate(' + width / 2 + ',' + opts.margin.top + ')');\n\n      zoom.translate([width / 2, opts.margin.top]);\n\n      // Compute the layout.\n      this.tree = d3.layout.tree()\n        .nodeSize(nodeSize);\n\n      this.tree.separation(function separation(a, b) {\n        if (a.hidden || b.hidden) {\n          return 0.3;\n        } else {\n          return 0.6;\n        }\n      });\n\n      this._update(this.root);\n\n    }\n\n    _update(source) {\n\n      var opts = this.opts;\n      var allNodes = this.allNodes;\n      var nodeSize = this.nodeSize;\n\n      var nodes = this.tree.nodes(source);\n\n      // Since root node is hidden, readjust height.\n      var rootOffset = 0;\n      if (nodes.length > 1) {\n        rootOffset = nodes[1].y;\n      }\n      _.forEach(nodes, function(n) {\n        n.y = n.y - rootOffset / 2;\n      });\n\n      var links = this.tree.links(nodes);\n\n      // Create the link lines.\n      this.svg.selectAll('.link')\n        .data(links)\n        .enter()\n        .append('path')\n        .attr('class', opts.styles.linage)\n        .attr('d', this._elbow);\n\n      var nodes = this.svg.selectAll('.node')\n        .data(nodes)\n        .enter();\n\n      this._linkSiblings();\n\n      // Draw siblings (marriage)\n      this.svg.selectAll('.sibling')\n        .data(this.siblings)\n        .enter()\n        .append('path')\n        .attr('class', opts.styles.marriage)\n        .attr('d', this._siblingLine);\n\n      // Create the node rectangles.\n      nodes.append('foreignObject')\n        .attr('display', function(d) {\n          if (d.hidden) {\n            return 'none';\n          } else {\n            return '';\n          };\n        })\n        .attr('x', function(d) {\n          return d.x - nodeSize[0] / 4;\n        })\n        .attr('y', function(d) {\n          return d.y - nodeSize[1] / 6;\n        })\n        .attr('width', nodeSize[0] / 2)\n        .attr('height', nodeSize[1] / 3)\n        .attr('id', function(d) {\n          return d.id;\n        })\n        .html(function(d) {\n          if (d.hidden) {\n            return null;\n          }\n          return opts.callbacks.nodeRenderer(\n            d.name,\n            d.x,\n            d.y,\n            nodeSize[0] / 2,\n            nodeSize[1] / 3,\n            d.extra,\n            d.id,\n            d.class ? d.class : opts.styles.nodes,\n            d.textClass ? d.textClass : opts.styles.text,\n            opts.callbacks.textRenderer);\n        })\n        .on('click', function(d)  {\n          if (d.hidden) {\n            return;\n          }\n          opts.callbacks.nodeClick(d.name, d.extra, d.id);\n        });\n    }\n\n    _flatten(root) {\n      var n = [];\n      var i = 0;\n\n      function recurse(node) {\n        if (node.children) {\n          node.children.forEach(recurse);\n        }\n        if (!node.id) {\n          node.id = ++i;\n        }\n        n.push(node);\n      }\n      recurse(root);\n      return n;\n    }\n\n    _elbow(d, i) {\n      if (d.target.noParent) {\n        return 'M0,0L0,0';\n      }\n      var ny = d.target.y + (d.source.y - d.target.y) * 0.50;\n\n      var linedata = [{\n        x: d.target.x,\n        y: d.target.y\n      }, {\n        x: d.target.x,\n        y: ny\n      }, {\n        x: d.source.x,\n        y: d.source.y\n      }];\n\n      var fun = d3.svg.line()\n        .x(function(d) {\n          return d.x;\n        })\n        .y(function(d) {\n          return d.y;\n        })\n        .interpolate('step-after');\n      return fun(linedata);\n    }\n\n    _linkSiblings() {\n\n      var allNodes = this.allNodes;\n\n      _.forEach(this.siblings, function(d)  {\n        var start = allNodes.filter(function(v) {\n          return d.source.id == v.id;\n        });\n        var end = allNodes.filter(function(v) {\n          return d.target.id == v.id;\n        });\n        d.source.x = start[0].x;\n        d.source.y = start[0].y;\n        d.target.x = end[0].x;\n        d.target.y = end[0].y;\n      });\n\n    }\n\n    _siblingLine(d, i) {\n\n      var ny = d.target.y + (d.source.y - d.target.y) * 0.50;\n\n      var linedata = [{\n        x: d.source.x,\n        y: d.source.y\n      }, {\n        x: d.target.x,\n        y: ny\n      }, {\n        x: d.target.x,\n        y: d.target.y\n      }];\n\n      var fun = d3.svg.line()\n        .x(function(d) {\n          return d.x;\n        })\n        .y(function(d) {\n          return d.y;\n        })\n        .interpolate('step-after');\n      return fun(linedata);\n    }\n\n    _calculateNodeSize() {\n\n      // Not used at the moment\n      var longest = '';\n      _.forEach(this.allNodes, function(n) {\n        if (n.name.length > longest.length) {\n          longest = n.name;\n        }\n      });\n\n      return [200, 100];\n    }\n\n    static _nodeRenderer(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {\n      var node = '';\n      node += '<div ';\n      node += 'style=\"height:100%;width:100%;\" ';\n      node += 'class=\"' + nodeClass + '\" ';\n      node += 'id=\"node' + id + '\">\\n';\n      node += textRenderer(name, extra, textClass);\n      node += '</div>';\n      return node;\n    }\n\n    static _textRenderer(name, extra, textClass) {\n      var node = '';\n      node += '<p ';\n      node += 'align=\"center\" ';\n      node += 'class=\"' + textClass + '\">\\n';\n      node += name;\n      node += '</p>\\n';\n      return node;\n    }\n\n    static _debug(msg) {\n      if (TreeBuilder.DEBUG_LEVEL > 0)  {\n        console.log(msg);\n      }\n    }\n\n  }\n\n  const dTree = {\n\n    VERSION: '0.6.1',\n\n    init: function(data, options = {}) {\n\n      var opts = _.defaultsDeep(options || {}, {\n        target: '#graph',\n        debug: false,\n        width: 600,\n        height: 600,\n        callbacks: {\n          nodeClick: function(name, extra, id) {},\n          nodeRenderer: function(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {\n            return TreeBuilder._nodeRenderer(name, x, y, height, width, extra,\n              id,nodeClass, textClass, textRenderer);\n          },\n          nodeSorter: function(aName, aExtra, bName, bExtra) {return 0;},\n          textRenderer: function(name, extra, textClass) {\n            return TreeBuilder._textRenderer(name, extra, textClass);\n          },\n        },\n        margin: {\n          top: 0,\n          right: 0,\n          bottom: 0,\n          left: 0\n        },\n        styles: {\n          node: 'node',\n          linage: 'linage',\n          marriage: 'marriage',\n          text: 'nodeText'\n        }\n      });\n\n      var data = this._preprocess(data, opts);\n      var treeBuilder = new TreeBuilder(data.root, data.siblings, opts);\n      treeBuilder.create();\n\n    },\n\n    _preprocess: function(data, opts) {\n\n      var siblings = [];\n      var id = 0;\n\n      var root = {\n        name: '',\n        id: id++,\n        hidden: true,\n        children: []\n      };\n\n      var reconstructTree = function(person, parent) {\n\n        // convert to person to d3 node\n        var node = {\n          name: person.name,\n          id: id++,\n          hidden: false,\n          children: [],\n          extra: person.extra,\n          textClass: person.textClass,\n          class: person.class\n        };\n\n        // hide linages to the hidden root node\n        if (parent == root) {\n          node.noParent = true;\n        }\n\n        // apply depth offset\n        for (var i = 0; i < person.depthOffset; i++) {\n          var pushNode = {\n            name: '',\n            id: id++,\n            hidden: true,\n            children: [],\n            noParent: node.noParent\n          };\n          parent.children.push(pushNode);\n          parent = pushNode;\n        }\n\n        // sort children\n        dTree._sortPersons(person.children, opts);\n\n        // add \"direct\" children\n        _.forEach(person.children, function(child) {\n          reconstructTree(child, node);\n        });\n\n        // go through marriage\n        if (person.marriage) {\n\n          var m = {\n            name: '',\n            id: id++,\n            hidden: true,\n            noParent: true,\n            children: [],\n            extra: person.marriage.extra\n          };\n\n          var spouse = {\n            name: person.marriage.spouse.name,\n            id: id++,\n            hidden: false,\n            noParent: true,\n            children: [],\n            textClass: person.marriage.spouse.textClass,\n            class: person.marriage.spouse.class,\n            extra: person.marriage.spouse.extra\n          };\n\n          var marriedCouple = dTree._sortPersons([node, spouse], opts);\n          parent.children.push(marriedCouple[0], m, marriedCouple[1]);\n\n          dTree._sortPersons(person.marriage.children, opts);\n          _.forEach(person.marriage.children, function(child) {\n            reconstructTree(child, m);\n          });\n\n          siblings.push({\n            source: {\n              id: node.id\n            },\n            target: {\n              id: spouse.id\n            }\n          });\n\n        } else {\n          parent.children.push(node);\n        }\n\n      };\n\n      _.forEach(data, function(person) {\n        reconstructTree(person, root);\n      });\n\n      return {\n        root: root,\n        siblings: siblings\n      };\n\n    },\n\n    _sortPersons: function(persons, opts) {\n      if (persons != undefined) {\n        persons.sort(function(a, b) {\n          return opts.callbacks.nodeSorter(a.name, a.extra, b.name, b.extra);\n        });\n      }\n      return persons;\n    }\n\n  };\n\n  return dTree;\n\n}));"],"sourceRoot":"/source/"}